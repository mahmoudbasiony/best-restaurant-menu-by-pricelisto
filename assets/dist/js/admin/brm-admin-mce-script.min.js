"use strict";!function(c){tinymce.PluginManager.add("brm_restaurant_menu",function(s,e){c(document).on("change",'input[name="show_group_title"]',function(e){c(this).is(":checked")?c(this).val("yes"):c(this).val("no")}),c(document).on("change",'input[name="show_group_desc"]',function(e){c(this).is(":checked")?c(this).val("yes"):c(this).val("no")}),c(document).on("change",'input[name="show_items"]',function(e){c(this).is(":checked")?c(this).val("1"):c(this).val("0")}),c(document).on("click",".insert-shortcode",function(e){e.preventDefault();var o={attr:{groups:"",show_group_title:c(".show-group-title").val(),show_group_desc:c(".show-group-desc").val(),show_items:c(".show-items").val(),view:c("select#view-mode option:selected").val()},name:"brm_restaurant_menu"},t=[];if(c("select#groups-included option:selected").each(function(){var e=c(this).val();t.push(e)}),0<t.length){var n=t.join(",");o.attr.groups=n}var a=wp.shortcode.string({tag:o.name,attrs:o.attr,type:"single"});s.insertContent(a),c("#popup-overlay").remove()}),c(document).on("click",".cancel-shortcode",function(e){e.preventDefault(),c("#popup-overlay").remove()}),s.addButton("brm_add_menu",{text:"Menu",title:"Best Restaurant Menu Shortcode",image:"",icon:!1,onclick:function(){c("#popup-overlay").length<=0&&c("body").append('<div id="popup-overlay"><div class="popup-overlay-content"><div class="popup-close cancel-shortcode"><svg viewbox="0 0 40 40"><path class="close-x" d="M 10,10 L 30,30 M 30,10 L 10,30" /></svg></div></div></div>');c.ajax({url:brm_params.ajax_url,data:{action:"brm_shortcode_builder_form"},type:"POST",success:function(e){if(e&&e.data&&e.data.status&&"200"==e.data.status){var o=e.data.shortcode_form;c("#popup-overlay .popup-overlay-content").html(""),c("#popup-overlay .popup-overlay-content").append('<div class="popup-close cancel-shortcode"><svg viewbox="0 0 40 40"><path class="close-x" d="M 10,10 L 30,30 M 30,10 L 10,30" /></svg></div>'),c("#popup-overlay .popup-overlay-content").append(o),c("form.brm-shortcode-builder #groups-included").select2(),c(".popup-close").on("click",function(e){c("#popup-overlay").remove()})}},error:function(e){console.log(e)}})}})})}(jQuery);