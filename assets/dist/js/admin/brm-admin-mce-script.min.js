"use strict";!function(a){tinymce.PluginManager.add("brm_restaurant_menu",function(n,e){a(document).on("change",'input[name="show_group_title"]',function(e){a(this).is(":checked")?a(this).val("yes"):a(this).val("no")}),a(document).on("change",'input[name="show_group_desc"]',function(e){a(this).is(":checked")?a(this).val("yes"):a(this).val("no")}),a(document).on("change",'input[name="show_items"]',function(e){a(this).is(":checked")?a(this).val("1"):a(this).val("0")}),a(document).on("click",".insert-shortcode",function(e){e.preventDefault();var o={attr:{groups:"",show_group_title:a(".show-group-title").val(),show_group_desc:a(".show-group-desc").val(),show_items:a(".show-items").val(),view:a("select#view-mode option:selected").val()},name:"brm_restaurant_menu"},t=[];a("select#groups-included option:selected").each(function(){var e=a(this).val();t.push(e)}),0<t.length&&(e=t.join(","),o.attr.groups=e);o=wp.shortcode.string({tag:o.name,attrs:o.attr,type:"single"});n.insertContent(o),a("#popup-overlay").remove()}),a(document).on("click",".cancel-shortcode",function(e){e.preventDefault(),a("#popup-overlay").remove()}),n.addButton("brm_add_menu",{text:"Menu",title:"Best Restaurant Menu Shortcode",image:"",icon:!1,onclick:function(){a("#popup-overlay").length<=0&&a("body").append('<div id="popup-overlay"><div class="popup-overlay-content"><div class="popup-close cancel-shortcode"><svg viewbox="0 0 40 40"><path class="close-x" d="M 10,10 L 30,30 M 30,10 L 10,30" /></svg></div></div></div>');var e={action:"brm_shortcode_builder_form",nonce:brm_params.nonce};a.ajax({url:brm_params.ajax_url,data:e,type:"POST",success:function(e){e&&e.data&&e.data.status&&"200"==e.data.status&&(e=e.data.shortcode_form,a("#popup-overlay .popup-overlay-content").html(""),a("#popup-overlay .popup-overlay-content").append('<div class="popup-close cancel-shortcode"><svg viewbox="0 0 40 40"><path class="close-x" d="M 10,10 L 30,30 M 30,10 L 10,30" /></svg></div>'),a("#popup-overlay .popup-overlay-content").append(e),a("form.brm-shortcode-builder #groups-included").select2(),a(".popup-close").on("click",function(e){a("#popup-overlay").remove()}))},error:function(e){console.log(e)}})}})})}(jQuery);