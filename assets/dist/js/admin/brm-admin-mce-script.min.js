"use strict";!function(s){tinymce.PluginManager.add("brm_restaurant_menu",function(c,e){s(document).on("change",'input[name="show_items"]',function(e){s(this).is(":checked")?s(this).val("1"):s(this).val("0")}),s(document).on("click",".insert-shortcode",function(e){e.preventDefault();var o={attr:{groups:"",show_items:s(".show-items").val(),view:s("select#view-mode option:selected").val()},name:"brm_restaurant_menu"},t=[];if(s("select#groups-included option:selected").each(function(){var e=s(this).val();t.push(e)}),0<t.length){var a=t.join(",");o.attr.groups=a}var n=wp.shortcode.string({tag:o.name,attrs:o.attr,type:"single"});c.insertContent(n),s("#popup-overlay").remove()}),s(document).on("click",".cancel-shortcode",function(e){e.preventDefault(),s("#popup-overlay").remove()}),c.addButton("brm_add_menu",{text:"Menu",title:"Best Restaurant Menu Shortcode",image:"",icon:!1,onclick:function(){s("#popup-overlay").length<=0&&s("body").append('<div id="popup-overlay"><div class="popup-overlay-content"><div class="popup-close cancel-shortcode"><svg viewbox="0 0 40 40"><path class="close-x" d="M 10,10 L 30,30 M 30,10 L 10,30" /></svg></div></div></div>');s.ajax({url:brm_params.ajax_url,data:{action:"brm_shortcode_builder_form"},type:"POST",success:function(e){if(e&&e.data&&e.data.status&&"200"==e.data.status){var o=e.data.shortcode_form;s("#popup-overlay .popup-overlay-content").html(""),s("#popup-overlay .popup-overlay-content").append('<div class="popup-close cancel-shortcode"><svg viewbox="0 0 40 40"><path class="close-x" d="M 10,10 L 30,30 M 30,10 L 10,30" /></svg></div>'),s("#popup-overlay .popup-overlay-content").append(o),s("form.brm-shortcode-builder #groups-included").select2(),s(".popup-close").on("click",function(e){s("#popup-overlay").remove()})}},error:function(e){console.log(e)}})}})})}(jQuery);